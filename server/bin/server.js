// Generated by CoffeeScript 1.12.1
(function() {
  var app, express, fs, http, server, yaml;

  express = require('express');

  http = require('http');

  fs = require('fs');

  yaml = require('js-yaml');

  app = express();

  server = http.createServer(app);

  app.get('/', function(req, res) {
    var doc, i, len, ref, url;
    doc = yaml.safeLoad(fs.readFileSync(process.env.HOME + "/.config/kitsune.yml", 'utf8'));
    ref = Object.keys(doc.styles);
    for (i = 0, len = ref.length; i < len; i++) {
      url = ref[i];
      if (fs.existsSync(doc.styles[url])) {
        doc.styles[url] = fs.readFileSync(doc.styles[url], 'utf8');
      }
    }
    return res.send(JSON.stringify(doc));
  });

  server.listen(3000, 'localhost');

  server.on('listening', function() {
    return console.log('Serving kitsune.yml!');
  });

}).call(this);
